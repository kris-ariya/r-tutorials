<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lab 08: Data Cleaning</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R @ PSY Chula</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    RES MTHD/STAT PSY Lab
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="RES_STAT_Lab04.html">Lab 04: Descriptive Statistics</a>
    </li>
    <li>
      <a href="RES_STAT_Lab05.html">Lab 05: Standard Score</a>
    </li>
    <li>
      <a href="RES_STAT_Lab06.html">Lab 06: Visualizing Distribution</a>
    </li>
    <li>
      <a href="RES_STAT_Lab07.html">Lab 07: Sampling Distribution</a>
    </li>
    <li>
      <a href="RES_STAT_Lab08.html">Lab 08: Confidence Interval and t Test</a>
    </li>
    <li>
      <a href="RES_STAT_Lab09.html">Lab 09: Correlation</a>
    </li>
    <li>
      <a href="RES_STAT_Lab10.html">Lab 10: Simple Regression</a>
    </li>
    <li>
      <a href="RES_STAT_Lab12.html">Lab 12: Dependent t Test</a>
    </li>
    <li>
      <a href="RES_STAT_Lab13.html">Lab 13: Independent t Test</a>
    </li>
    <li>
      <a href="RES_STAT_Lab14.html">Lab 14: Chi-Squared Test</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    EXPRM DESIGN/ANA Lab
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="EXPRM_Lab02.html">Lab 02: Randomization</a>
    </li>
    <li>
      <a href="EXPRM_Lab03.html">Lab 03: Power and Sample Size</a>
    </li>
    <li>
      <a href="EXPRM_Lab04.html">Lab 04: One-way ANOVA</a>
    </li>
    <li>
      <a href="EXPRM_Lab05.html">Lab 05: Multiple Comparisons</a>
    </li>
    <li>
      <a href="EXPRM_Lab07.html">Lab 07: Factorial ANOVA</a>
    </li>
    <li>
      <a href="EXPRM_Lab09.html">Lab 09: Data Visualization with ggplot2</a>
    </li>
    <li>
      <a href="EXPRM_Lab10.html">Lab 10: Repeated-Measures ANOVA</a>
    </li>
    <li>
      <a href="EXPRM_Lab11.html">Lab 11: Factorial ANOVA in Repeated-Measures Design</a>
    </li>
    <li>
      <a href="EXPRM_Lab12.html">Lab 12: Means Comparison in Regression</a>
    </li>
    <li>
      <a href="EXPRM_Lab13.html">Lab 13: ANCOVA</a>
    </li>
    <li>
      <a href="EXPRM_Lab14.html">Lab 14: Moderation Analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    SURVEY DESIGN/ANA Lab
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="SURVEY_Lab08.html">Lab 08: Data Cleaning</a>
    </li>
    <li>
      <a href="SURVEY_Lab09.html">Lab 09: Multiple Regression</a>
    </li>
    <li>
      <a href="SURVEY_Lab10.html">Lab 10: Hierarchical Regresion</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lab 08: Data Cleaning</h1>
<h4 class="date">Mar 17, 2022</h4>

</div>


<p>โหลดแพ็คเกจที่จะต้องใช้ในแบบฝึกหัดนี้</p>
<pre class="r"><code>library(psych)
#install.packages(&quot;careless&quot;)
library(careless)
library(carData)
library(Hmisc)
library(haven) # for SPSS import</code></pre>
<div id="import-data" class="section level1">
<h1>0. Import Data</h1>
<div id="csv" class="section level2">
<h2>.CSV</h2>
<p><a href="SURVEY_Lab08_Data.csv">ข้อมูลที่ใช้ในครั้งนี้</a> เป็นข้อมูลที่ดัดแปลงจาก dataset <code>bfi</code> ในแพ็คเกจ psych ซึ่งเป็นข้อมูลของมาตรบุคลิกภาพ Big 5 โดยมีองค์ประกอบละ 5 ข้อ ได้แก่ Agreeableness: <code>A1</code> - <code>A5</code>; Conscientiousness: <code>C1</code>-<code>C5</code>; Extraversion: <code>E1</code>-<code>E5</code>; Neuroticism: <code>N1</code>-<code>N5</code>; และ Openness to Experience: <code>O1</code>-<code>O5</code></p>
<p><code>X</code> คือ ID</p>
<p>ตัวแปร <code>gender</code>: Male = 1; Females = 2</p>
<p><code>education</code>: 1 = HS (High School); 2 = finished HS; 3 = some college; 4 = college graduate; 5 = graduate degree</p>
<p><code>age</code> อายุหน่วยเป็นปี</p>
<p><code>completed</code> ตอบแบบสอบถามเสร็จสิ้นหรือไม่ 0 = incomplete; 1 = complete</p>
<pre class="r"><code># Import data &amp; factorize variables
big5_data &lt;- read.csv(&quot;SURVEY_Lab08_Data.csv&quot;, stringsAsFactors=TRUE)
big5_data$gender &lt;- factor(big5_data$gender, labels = c(&quot;Male&quot;, &quot;Females&quot;))
big5_data$education &lt;- factor(big5_data$education, labels = c(&quot;HS&quot;, &quot;finished HS&quot;, &quot;some college&quot;, &quot;college graduate&quot;, &quot;graduate degree&quot;))
head(big5_data)</code></pre>
<pre><code>##       X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender    education age
## 1 61617  2  4  3  4  4  2  3  3  4  4  3  3  3  4  4  3  4  2  2  3  3  6  3  4  3    Male         &lt;NA&gt;  16
## 2 61618  2  4  5  2  5  5  4  4  3  4  1  1  6  4  3  3  3  3  5  5  4  2  4  3  3 Females         &lt;NA&gt;  18
## 3 61620  5  4  5  4  4  4  5  4  2  5  2  4  4  4  5  4  5  4  2  3  4  2  5  5  2 Females         &lt;NA&gt;  17
## 4 61621  4  4  6  5  5  4  4  3  5  5  5  3  4  4  4  2  5  2  4  1  3  3  4  3  5 Females         &lt;NA&gt;  17
## 5 61622  2  3  3  4  5  4  4  5  3  2  2  2  5  4  5  2  3  4  4  3  3  3  4  3  3    Male         &lt;NA&gt;  17
## 6 61623  6  6  5  6  5  6  6  6  1  3  2  1  6  5  6  3  5  2  2  3  4  3  5  6  1 Females some college  21
##   completed
## 1         1
## 2         1
## 3         1
## 4         1
## 5         1
## 6         1</code></pre>
</div>
<div id="sav-spss-files" class="section level2">
<h2>.SAV (SPSS files)</h2>
<p>ถ้าข้อมูลเป็น<a href="SURVEY_Lab08_Data.sav">ไฟล์ข้อมูลจาก SPSS</a> จะต้องใช้คำสั่งจากแพ็คเกจ haven เพื่อนำเข้าข้อมูล แต่ข้อมูลจะอยู่ในรูปแบบของตารางที่เรียกว่า tibble (<code>tbl_df</code>) ซึ่งไม่ใช่ data.frame ปกติ</p>
<pre class="r"><code>big5_spss &lt;- read_sav(&quot;SURVEY_Lab08_Data.sav&quot;)
big5_spss</code></pre>
<pre><code>## # A tibble: 2,800 × 30
##       ID    A1    A2    A3    A4    A5    C1    C2    C3    C4    C5    E1    E2    E3    E4    E5    N1    N2    N3
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 61617     2     4     3     4     4     2     3     3     4     4     3     3     3     4     4     3     4     2
##  2 61618     2     4     5     2     5     5     4     4     3     4     1     1     6     4     3     3     3     3
##  3 61620     5     4     5     4     4     4     5     4     2     5     2     4     4     4     5     4     5     4
##  4 61621     4     4     6     5     5     4     4     3     5     5     5     3     4     4     4     2     5     2
##  5 61622     2     3     3     4     5     4     4     5     3     2     2     2     5     4     5     2     3     4
##  6 61623     6     6     5     6     5     6     6     6     1     3     2     1     6     5     6     3     5     2
##  7 61624     2     5     5     3     5     5     4     4     2     3     4     3     4     5     5     1     2     2
##  8 61629     4     3     1     5     1     3     2     4     2     4     3     6     4     2     1     6     3     2
##  9 61630     4     3     6     3     3     6     6     3     4     5     5     3    NA     4     3     5     5     2
## 10 61633     2     5     6     6     5     6     5     6     2     1     2     2     4     5     5     5     5     5
## # … with 2,790 more rows, and 11 more variables: N4 &lt;dbl&gt;, N5 &lt;dbl&gt;, O1 &lt;dbl&gt;, O2 &lt;dbl&gt;, O3 &lt;dbl&gt;, O4 &lt;dbl&gt;,
## #   O5 &lt;dbl&gt;, gender &lt;dbl+lbl&gt;, education &lt;dbl+lbl&gt;, age &lt;dbl&gt;, completed &lt;dbl+lbl&gt;</code></pre>
<pre class="r"><code>class(big5_spss)</code></pre>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>ตาราง tibble สามารถจัดข้อมูลให้อ่านและใช้งานง่ายกว่า data.frame (เช่น แสดง data type บนหัวตาราง &lt;dbl&gt; = double หรือ แสดงผลแค่ 10 รายการแรกโดยอัตโนมัติแทนที่จะพิมพ์ข้อมูลทั้งหมดเหมือน data.frame) แต่ tibble ถูกออกแบบมาสำหรับใช้กับแพ็คเกจในกลุ่ม tidyverse เป็นหลัก จึงอาจมีปัญหากับคำสั่งบางตัวใน Base R</p>
<p>ในแบบฝึกหัดนี้ เราจะแปลง tibble กลับไปเป็น data.frame ก่อนด้วยคำสั่ง <code>as.data.frame()</code></p>
<pre class="r"><code>big5_data2 &lt;- as.data.frame(big5_spss)
class(big5_data2)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<pre class="r"><code>head(big5_data2)</code></pre>
<pre><code>##      ID A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5 gender education age completed
## 1 61617  2  4  3  4  4  2  3  3  4  4  3  3  3  4  4  3  4  2  2  3  3  6  3  4  3      1        NA  16         1
## 2 61618  2  4  5  2  5  5  4  4  3  4  1  1  6  4  3  3  3  3  5  5  4  2  4  3  3      2        NA  18         1
## 3 61620  5  4  5  4  4  4  5  4  2  5  2  4  4  4  5  4  5  4  2  3  4  2  5  5  2      2        NA  17         1
## 4 61621  4  4  6  5  5  4  4  3  5  5  5  3  4  4  4  2  5  2  4  1  3  3  4  3  5      2        NA  17         1
## 5 61622  2  3  3  4  5  4  4  5  3  2  2  2  5  4  5  2  3  4  4  3  3  3  4  3  3      1        NA  17         1
## 6 61623  6  6  5  6  5  6  6  6  1  3  2  1  6  5  6  3  5  2  2  3  4  3  5  6  1      2         3  21         1</code></pre>
</div>
</div>
<div id="การคดขอมลทไมครบถวนออก-dropping-incomplete-cases" class="section level1">
<h1>1. การคัดข้อมูลที่ไม่ครบถ้วนออก (Dropping Incomplete Cases)</h1>
<p>ในกรณีที่ข้อมูลจากแบบสอบถามออนไลน์มี metadata ว่าผู้ตอบ ได้ตอบแบบสอบถามเสร็จสิ้นหรือไม่ (เช่น ตัวแปร <code>completed</code> ในข้อมูลนี้) เราสามารถใช้ตัวแปรนั้นเพื่อคัดข้อมูลที่ไม่ครบถ้วนออกได้</p>
<pre class="r"><code># Option 1: subset()
big5_complete &lt;- subset(big5_data, subset = big5_data$completed == 1 )
# Option 2: logical index
big5_complete2 &lt;- big5_data[big5_data$completed == 1, ] #choose only completed rows, retain all columns
identical(big5_complete, big5_complete2) # check whether both options give the same results</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>ในกรณีที่ไม่มีตัวแปรเพื่อบ่งบอกว่า ตอบครบถ้วนหรือไม่ เราอาจใช้เกณฑ์บางอย่างเพื่อตัดคำตอบที่ไม่สมบูรณ์ออก เช่น มีข้อมูลสูญหายตั้งแต่ 70% ขึ้นไป</p>
<p>เราจะเริ่มด้วยการหาว่ามี <code>NA</code> อยู่ตรงไหนบ้างในข้อมูลด้วย <code>is.na</code> จากนั้นรวมจำนวน <code>NA</code> แต่ละแถวด้วย <code>rowSums</code> แล้วหารด้วยจำนวนตัวแปร (25 ข้อแบบสอบถาม + 3 ข้อ demographic)</p>
<p>จากนั้นเราควรสำรวจข้อมูลด้วยตาอีกครั้งว่าเป็นข้อมูลที่ตอบไม่ครบถ้วนจริงหรือไม่ เช่น ข้อมูลของมาตรช่วงท้าย ๆ สูญหายเนื่องจากผู้ตอบทิ้งแบบสอบถามไปแล้ว</p>
<pre class="r"><code>percentNA &lt;- rowSums(is.na(big5_data[, 2:29]))/28 #calculate proportion of NA for each case. Column 2 is the first column for items. We also pretend that Column 30 does not exist.
big5_data[percentNA &gt; .7, ] # show incomplete cases</code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender    education age
## 2252 66439  4  5  5  6  6 NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA Females  finished HS  20
## 2696 67360  2  4  3  5  4 NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA Females some college  18
##      completed
## 2252         0
## 2696         0</code></pre>
<pre class="r"><code>big5_complete3 &lt;- big5_data[percentNA &lt;= .7, ] #select only data with 30% or more completion. </code></pre>
</div>
<div id="ตรวจสอบวาขอมลสญหายถกบนทกไวถกตองหรอไม" class="section level1">
<h1>2. ตรวจสอบว่าข้อมูลสูญหายถูกบันทึกไว้ถูกต้องหรือไม่</h1>
<p>ในโปรแกรม R ข้อมูลสูญหายจะถูกบันทึกเป็น <code>NA</code> โดยเราสามารถดูตำแหน่งของ<em>แถว (rows)</em> ที่มี <code>NA</code> ได้ด้วยการนิเสธ (not) <code>!</code> คำสั่ง <code>complete.cases()</code> ร่วมกับ <code>which()</code></p>
<pre class="r"><code>which(!complete.cases(big5_complete), arr.ind = TRUE)</code></pre>
<pre><code>##   [1]    1    2    3    4    5    7    9   10   12   13   14   16   17   18   19   20   21   22   28   31   34   35
##  [23]   39   42   63   66   72   77   78   83   90  101  107  108  112  130  133  137  140  161  168  170  175  182
##  [45]  196  198  199  201  202  204  205  206  208  209  212  213  214  215  221  222  228  232  237  241  242  244
##  [67]  247  249  272  273  288  293  296  297  298  306  310  311  317  327  328  332  335  336  341  342  354  356
##  [89]  357  359  367  381  384  388  389  396  397  402  404  422  424  425  427  442  448  451  452  467  470  484
## [111]  493  495  503  506  523  525  530  537  539  547  558  578  592  593  598  606  610  611  613  614  619  625
## [133]  627  638  639  645  655  664  666  672  676  677  678  679  683  688  689  690  702  703  704  705  706  707
## [155]  711  713  714  716  719  728  732  740  744  750  753  755  756  757  758  759  760  761  762  763  764  775
## [177]  781  786  789  792  795  798  799  800  802  803  805  806  814  817  818  822  824  827  830  832  834  845
## [199]  847  848  852  854  862  870  889  892  894  896  901  902  903  904  905  913  914  923  937  947  951  961
## [221]  964  967  976  978  980  995 1001 1006 1012 1014 1023 1030 1035 1037 1040 1042 1045 1054 1060 1068 1071 1081
## [243] 1084 1092 1095 1096 1100 1106 1107 1113 1119 1120 1122 1126 1132 1137 1141 1142 1143 1145 1153 1155 1163 1164
## [265] 1167 1172 1176 1180 1209 1216 1220 1221 1224 1228 1229 1236 1239 1241 1243 1246 1247 1251 1254 1258 1261 1275
## [287] 1292 1293 1294 1300 1307 1319 1329 1332 1335 1341 1342 1344 1345 1354 1355 1362 1371 1375 1384 1386 1389 1398
## [309] 1405 1407 1417 1419 1428 1434 1444 1454 1463 1471 1473 1474 1486 1492 1497 1503 1523 1527 1528 1531 1538 1551
## [331] 1557 1576 1579 1582 1583 1596 1601 1604 1606 1616 1626 1629 1634 1641 1648 1650 1655 1667 1683 1687 1692 1693
## [353] 1710 1712 1716 1723 1724 1745 1752 1764 1774 1776 1795 1804 1810 1816 1818 1821 1829 1837 1838 1840 1843 1849
## [375] 1853 1864 1866 1870 1873 1876 1877 1883 1887 1893 1896 1902 1908 1910 1914 1918 1920 1922 1932 1940 1953 1961
## [397] 1977 1982 1983 1986 1989 2009 2018 2021 2024 2031 2037 2040 2041 2057 2064 2070 2073 2089 2094 2099 2100 2103
## [419] 2132 2136 2141 2146 2148 2151 2163 2176 2177 2195 2204 2209 2215 2218 2221 2231 2237 2242 2246 2251 2270 2271
## [441] 2272 2290 2291 2303 2306 2313 2315 2328 2329 2333 2341 2349 2351 2355 2365 2367 2369 2371 2381 2383 2393 2395
## [463] 2398 2400 2402 2414 2417 2420 2421 2432 2447 2463 2464 2465 2468 2473 2474 2478 2481 2482 2485 2487 2493 2497
## [485] 2504 2514 2523 2528 2541 2542 2545 2552 2554 2557 2563 2569 2572 2577 2579 2588 2592 2593 2594 2595 2596 2597
## [507] 2598 2599 2600 2601 2602 2603 2606 2608 2609 2610 2611 2612 2613 2614 2615 2616 2617 2618 2619 2620 2621 2623
## [529] 2643 2644 2645 2646 2647 2649 2650 2651 2652 2656 2666 2679 2682 2690 2700 2701 2703 2704 2705 2706 2713 2715
## [551] 2722 2731 2732 2739 2742 2747 2748 2757 2760 2768 2777 2781 2787 2793 2794 2795</code></pre>
<p>แม้จะมีผู้ตอบที่มีข้อมูลสูญหายอยู่หลายคน แต่ก็คำสั่งนี้ยังไม่บอกปริมาณของข้อมูลที่สูญหายของแต่ละคน จึงยังไม่สามารถเหมารวมลบข้อมูลทิ้งได้ทั้งหมด</p>
<p>นอกจากนี้ แนวปฏิบัติในการบันทึกข้อมูลสูญหายนั้นอาจแตกต่างไปตามโปรแกรมสถิติที่คุ้นเคย ยกตัวอย่างเช่น ผู้วิจัยที่คุ้นเคยกับ SPSS มักจะบันทึกข้อมูลที่สูญหายด้วยเลข 9, 99, หรือ 999 แล้วตั้งค่าโปรแกรมให้ตีความเลขดังกล่าวเป็นค่า missing เพื่อแสดงให้เห็นว่าข้อมูลที่สูญหายนั้นเป็น user-defined missing (คือ ผู้วิจัยตรวจสอบแล้วว่าเป็นค่า missing จากแบบสอบถามจริงๆ) แทนที่จะเป็น system-missing (แสดงผลเป็นช่องว่างหรือ <code>NA</code> ซึ่งอาจเกิดจากความผิดพลาดในการบันทึกข้อมูล) แนวปฏิบัติเช่นนี้มีประโยชน์เพื่อสอบทานข้อมูลในกรณีที่ใช้แบบสอบถามกระดาษแล้วนำข้อมูลมาบันทึกเป็นไฟล์</p>
<p>แต่ในกรณีที่ แบบสอบถามถูกเก็บมาด้วยระบบคอมพิวเตอร์ตั้งแต่ต้น ค่าว่างหรือ <code>NA</code> นั้นแสดงถึงค่าสูญหายในการตอบอยู่แล้ว จึงไม่มีความจำเป็นต้องแปลงให้เป็นค่าเฉพาะอื่นใด เราปล่อยให้ค่าสูญหายเป็น <code>NA</code> ไว้ได้เลย</p>
<p>การเขียนโค้ด R เพื่อจัดการกับค่า missing นั้นไม่นิยมนำตัวเลขอื่นมาใช้แทนค่า missing แต่ให้ใช้ <code>NA</code> เลย เนื่องจากคำสั่งการวิเคราะห์อาจไม่รองรับค่า missing อื่น ๆ ที่ผู้ใช้กำหนด ดังนั้นเมื่อตรวจสอบข้อมูลเสร็จเรียบร้อยแล้ว จึงควรแปลงค่า user-defined missing (เช่น 999) ให้กลายเป็น <code>NA</code> ทั้งหมด (เราควรเขียนโน้ตตำแหน่งและเหตุผลในการเปลี่ยนไว้เพื่อใช้อ้างอิงในภายหลัง)</p>
<p>ในตัวอย่างนี้เราจะค้นหาข้อมูลที่อาจจะถูกบันทึกไว้เป็นค่า user-defined missing เช่น 9, 99, 999, หรือ 9999 แล้วแปลงให้กลายเป็น <code>NA</code></p>
<pre class="r"><code>miss9 &lt;- which(big5_complete == 9, arr.ind = TRUE) # arr.ind gives index of row and col
miss9 # This variable has two indices: rows and columns.</code></pre>
<pre><code>##       row col
## 1492 1492  29</code></pre>
<pre class="r"><code>miss9[, 1] # The first column shows rows that contain 9.</code></pre>
<pre><code>## [1] 1492</code></pre>
<pre class="r"><code>big5_complete[miss9[,1], ] # Use the index in extract cases that contains 9. This is the case of age == 9, which is possible. This is not a missing value. </code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender education age
## 1492 64780  1  4  5 NA  5  4  1  6  5  3  1  1 NA  6  4  6  6  5  2  6  3  3 NA  5  5 Females      &lt;NA&gt;   9
##      completed
## 1492         1</code></pre>
<pre class="r"><code>miss99 &lt;- which(big5_complete == 99, arr.ind = TRUE)
big5_complete[miss99[,1], ] # N1 is coded as 99, which is out of range. This is a user-defined missing value.</code></pre>
<pre><code>##         X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender education age
## 203 62048  3  3  5  5  5  4  4  4  3  4  3  2  3  5  4 99  5  3  3  4  4  4  3  2  3 Females        HS  18
##     completed
## 203         1</code></pre>
<pre class="r"><code>miss999 &lt;- which(big5_complete == 999, arr.ind = TRUE)
big5_complete[miss999[,1], ] # There are many cases with 999 as missing values.</code></pre>
<pre><code>##           X A1 A2 A3 A4  A5 C1 C2 C3  C4  C5  E1  E2  E3  E4  E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender
## 161   61973  1  5  5  6 999  5  4  5   1   1   4   2   4   4   4  3  4  2 NA  1  5  1  4  4  4 Females
## 226   62102  1  6  6  6   4  1  5  6 999 999 999 999 999 999 999  2  5  5  4  4  5  5  5  6  1 Females
## 226.1 62102  1  6  6  6   4  1  5  6 999 999 999 999 999 999 999  2  5  5  4  4  5  5  5  6  1 Females
## 226.2 62102  1  6  6  6   4  1  5  6 999 999 999 999 999 999 999  2  5  5  4  4  5  5  5  6  1 Females
## 226.3 62102  1  6  6  6   4  1  5  6 999 999 999 999 999 999 999  2  5  5  4  4  5  5  5  6  1 Females
## 226.4 62102  1  6  6  6   4  1  5  6 999 999 999 999 999 999 999  2  5  5  4  4  5  5  5  6  1 Females
## 226.5 62102  1  6  6  6   4  1  5  6 999 999 999 999 999 999 999  2  5  5  4  4  5  5  5  6  1 Females
## 226.6 62102  1  6  6  6   4  1  5  6 999 999 999 999 999 999 999  2  5  5  4  4  5  5  5  6  1 Females
##             education age completed
## 161       finished HS  36         1
## 226   graduate degree  26         1
## 226.1 graduate degree  26         1
## 226.2 graduate degree  26         1
## 226.3 graduate degree  26         1
## 226.4 graduate degree  26         1
## 226.5 graduate degree  26         1
## 226.6 graduate degree  26         1</code></pre>
<pre class="r"><code>miss9999 &lt;- which(big5_complete == 9999, arr.ind = TRUE)
big5_complete[miss9999[,1], ] # No data is coded as 9999</code></pre>
<pre><code>##  [1] X         A1        A2        A3        A4        A5        C1        C2        C3        C4        C5       
## [12] E1        E2        E3        E4        E5        N1        N2        N3        N4        N5        O1       
## [23] O2        O3        O4        O5        gender    education age       completed
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<p>แทนค่า 99 และ 999 ด้วย <code>NA</code></p>
<pre class="r"><code>big5_complete[big5_complete == 99] &lt;- NA #replace 99 with NA
which(big5_complete == 99, arr.ind = TRUE) # no more data with 99</code></pre>
<pre><code>##      row col</code></pre>
<pre class="r"><code>big5_complete[big5_complete == 999] &lt;- NA
which(big5_complete == 999, arr.ind = TRUE)</code></pre>
<pre><code>##      row col</code></pre>
</div>
<div id="ตรวจสอบวาขอมลอยในพสยของมาตรหรอไม" class="section level1">
<h1>3. ตรวจสอบว่าข้อมูลอยู่ในพิสัยของมาตรหรือไม่</h1>
<p>แบบสอบถามบุคลิกภาพนี้เป็นมาตร 6 ระดับ จาก 1-6 จึงไม่ควรมีคะแนนนอกเหนือจากนี้ เราจะใช้ <code>describe</code> จากแพ็กเกจ psych เพื่อตรวจสอบว่ามีตัวแปรใดที่มีค่านอกพิสัยบ้าง</p>
<pre class="r"><code>begin &lt;- which(colnames(big5_complete) == &quot;A1&quot;)
end &lt;- which(colnames(big5_complete) == &quot;O5&quot;)
psych::describe(big5_complete[, begin:end]) # or just use [, 2:26]. We need psych::describe() because Hmisc also has describe()</code></pre>
<pre><code>##    vars    n mean   sd median trimmed  mad min max range  skew kurtosis   se
## A1    1 2782 2.41 1.41      2    2.23 1.48   1   6     5  0.82    -0.31 0.03
## A2    2 2771 4.80 1.17      5    4.98 1.48   1   6     5 -1.12     1.05 0.02
## A3    3 2772 4.60 1.30      5    4.79 1.48   1   6     5 -1.00     0.44 0.02
## A4    4 2779 4.70 1.48      5    4.93 1.48   1   6     5 -1.03     0.03 0.03
## A5    5 2781 4.56 1.26      5    4.71 1.48   1   7     6 -0.84     0.15 0.02
## C1    6 2777 4.50 1.24      5    4.64 1.48   1   6     5 -0.85     0.30 0.02
## C2    7 2774 4.37 1.32      5    4.50 1.48   1   6     5 -0.74    -0.14 0.03
## C3    8 2778 4.30 1.29      5    4.42 1.48   1   6     5 -0.69    -0.13 0.02
## C4    9 2771 2.55 1.37      2    2.41 1.48   1   6     5  0.60    -0.62 0.03
## C5   10 2781 3.31 1.72      3    3.25 1.48   1  33    32  1.88    30.16 0.03
## E1   11 2773 2.97 1.63      3    2.86 1.48   1   6     5  0.37    -1.09 0.03
## E2   12 2780 3.14 1.60      3    3.07 1.48   1   6     5  0.22    -1.15 0.03
## E3   13 2771 4.00 1.35      4    4.07 1.48   1   6     5 -0.47    -0.47 0.03
## E4   14 2787 4.42 1.46      5    4.59 1.48   1   6     5 -0.82    -0.31 0.03
## E5   15 2775 4.42 1.33      5    4.56 1.48   1   6     5 -0.78    -0.09 0.03
## N1   16 2775 2.93 1.57      3    2.82 1.48   1   6     5  0.37    -1.01 0.03
## N2   17 2777 3.51 1.53      4    3.51 1.48   1   6     5 -0.08    -1.05 0.03
## N3   18 2786 3.22 1.60      3    3.15 1.48   1   6     5  0.15    -1.18 0.03
## N4   19 2762 3.19 1.57      3    3.12 1.48   1   6     5  0.20    -1.09 0.03
## N5   20 2769 2.97 1.62      3    2.85 1.48   1   6     5  0.38    -1.06 0.03
## O1   21 2776 4.82 1.13      5    4.96 1.48   1   6     5 -0.90     0.42 0.02
## O2   22 2798 2.71 1.56      2    2.56 1.48   1   6     5  0.59    -0.81 0.03
## O3   23 2770 4.44 1.22      5    4.56 1.48   1   6     5 -0.77     0.30 0.02
## O4   24 2784 4.89 1.22      5    5.09 1.48   1   6     5 -1.22     1.08 0.02
## O5   25 2778 2.49 1.33      2    2.34 1.48   1   6     5  0.74    -0.24 0.03</code></pre>
<p>จากข้อมูลแต่ละข้อคำถาม ค่า Min ไม่มีต่ำกว่า 1 แต่มีบางข้อที่คะแนนมากกว่า 6 (เช่น ตัวแปร A5 กับ C5)</p>
<p>เราจะแทนที่คะแนนที่มากกว่า 6 ด้วย <code>NA</code></p>
<pre class="r"><code>big5_complete[, begin:end][big5_complete[, begin:end] &gt; 6] &lt;- NA
psych::describe(big5_complete[, begin:end]) # no more out-of-range data</code></pre>
<pre><code>##    vars    n mean   sd median trimmed  mad min max range  skew kurtosis   se
## A1    1 2782 2.41 1.41      2    2.23 1.48   1   6     5  0.82    -0.31 0.03
## A2    2 2771 4.80 1.17      5    4.98 1.48   1   6     5 -1.12     1.05 0.02
## A3    3 2772 4.60 1.30      5    4.79 1.48   1   6     5 -1.00     0.44 0.02
## A4    4 2779 4.70 1.48      5    4.93 1.48   1   6     5 -1.03     0.03 0.03
## A5    5 2780 4.56 1.26      5    4.71 1.48   1   6     5 -0.85     0.15 0.02
## C1    6 2777 4.50 1.24      5    4.64 1.48   1   6     5 -0.85     0.30 0.02
## C2    7 2774 4.37 1.32      5    4.50 1.48   1   6     5 -0.74    -0.14 0.03
## C3    8 2778 4.30 1.29      5    4.42 1.48   1   6     5 -0.69    -0.13 0.02
## C4    9 2771 2.55 1.37      2    2.41 1.48   1   6     5  0.60    -0.62 0.03
## C5   10 2780 3.30 1.63      3    3.24 1.48   1   6     5  0.07    -1.22 0.03
## E1   11 2773 2.97 1.63      3    2.86 1.48   1   6     5  0.37    -1.09 0.03
## E2   12 2780 3.14 1.60      3    3.07 1.48   1   6     5  0.22    -1.15 0.03
## E3   13 2771 4.00 1.35      4    4.07 1.48   1   6     5 -0.47    -0.47 0.03
## E4   14 2787 4.42 1.46      5    4.59 1.48   1   6     5 -0.82    -0.31 0.03
## E5   15 2775 4.42 1.33      5    4.56 1.48   1   6     5 -0.78    -0.09 0.03
## N1   16 2775 2.93 1.57      3    2.82 1.48   1   6     5  0.37    -1.01 0.03
## N2   17 2777 3.51 1.53      4    3.51 1.48   1   6     5 -0.08    -1.05 0.03
## N3   18 2786 3.22 1.60      3    3.15 1.48   1   6     5  0.15    -1.18 0.03
## N4   19 2762 3.19 1.57      3    3.12 1.48   1   6     5  0.20    -1.09 0.03
## N5   20 2769 2.97 1.62      3    2.85 1.48   1   6     5  0.38    -1.06 0.03
## O1   21 2776 4.82 1.13      5    4.96 1.48   1   6     5 -0.90     0.42 0.02
## O2   22 2798 2.71 1.56      2    2.56 1.48   1   6     5  0.59    -0.81 0.03
## O3   23 2770 4.44 1.22      5    4.56 1.48   1   6     5 -0.77     0.30 0.02
## O4   24 2784 4.89 1.22      5    5.09 1.48   1   6     5 -1.22     1.08 0.02
## O5   25 2778 2.49 1.33      2    2.34 1.48   1   6     5  0.74    -0.24 0.03</code></pre>
<p>นอกจากนี้ค่า mean และ sd ของข้อคำถามยังอยู่ในช่วงที่ดูเป็นปกติ</p>
<p>ต่อไปเราจะดูตัวแปร <code>gender</code> และ <code>education</code> เนื่องจากตัวแปรทั้งสองเป็น factor เมื่อเราใช้ <code>summary</code> โปรแกรม R จะสร้างตารางแจกแจงความถี่ให้ รวมถึงจำนวน <code>NA</code> (หากใช้คำสั่ง <code>table</code> จะไม่ปรากฏจำนวน <code>NA</code>)</p>
<pre class="r"><code>summary(big5_complete$gender)</code></pre>
<pre><code>##    Male Females 
##     919    1879</code></pre>
<pre class="r"><code>summary(big5_complete$education)</code></pre>
<pre><code>##               HS      finished HS     some college college graduate  graduate degree             NA&#39;s 
##              224              291             1248              394              418              223</code></pre>
</div>
<div id="ตรวจสอบความสมบรณขอมลในแตละมาตรยอย" class="section level1">
<h1>4. ตรวจสอบความสมบูรณ์ข้อมูลในแต่ละมาตรย่อย</h1>
<p>แม้ว่าข้อมูลโดยรวมของคนคนหนึ่งอาจจะไม่สูญหายถึงเกณฑ์คัดทิ้ง แต่ข้อมูลในระดับตัวแปรหรือมาตรย่อย (subscale) อาจไม่ครบถ้วนสมบูรณ์ จึงควรตรวจสอบความสมบูรณ์ของข้อมูลทีละตัวแปร และตัดสินใจว่าจะคัดข้อมูลทิ้งหรือไม่</p>
<p>สมมติให้เราตั้งเกณฑ์ว่าในแต่ละมาตรย่อยจะต้องมีข้อมูลสูญหายไม่เกินร้อยละ 50 ของข้อคำถามในองค์ประกอบหนึ่ง ๆ (เช่น ใน 5 ข้อต้องตอบอย่างน้อย 3 ข้อ)</p>
<p>เราจะเริ่มคำนวณจำนวนตัวแปรสูญหายของบุคลิกภาพแต่ละองค์ประกอบ โดยอันดับแรกคือการเลือกเฉพาะมาตรย่อยด้วยคำสั่ง <code>subset()</code> จากนั้นใช้ <code>is.na()</code> เพื่อดูว่าสร้าง logical 0-1 (<code>FALSE</code>-<code>TRUE</code>) ว่า ตำแหน่งใดเป็น <code>NA</code> จากนั้นเฉลี่ยค่าของแต่ละแถว ค่าเฉลี่ยที่ได้จะเป็นสัดส่วนของคำตอบ <code>NA</code> ของผู้ตอบแต่ละคน</p>
<pre class="r"><code># Agreeableness
perNAagree &lt;- rowMeans(is.na(subset(big5_complete, select = A1:A5))) #percent of NA for each case
big5_complete[perNAagree &gt; .5, ] # cases with more than 50% missing in Agreeableness</code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender    education age
## 676  63030  1 NA NA NA  5  6 NA NA NA  2 NA  2 NA  6 NA NA  3  4 NA NA NA  2 NA  4 NA Females some college  19
## 1122 63991  3 NA NA NA  3  3 NA NA NA  3 NA  3 NA  3 NA NA  3  3 NA NA NA  3 NA  3 NA Females some college  17
## 2307 66546  6 NA NA NA  4  6 NA NA NA  4 NA  4 NA  6 NA NA  4  6 NA NA NA  4 NA  6 NA    Male         &lt;NA&gt;  17
##      completed
## 676          1
## 1122         1
## 2307         1</code></pre>
<pre class="r"><code># Conscientiousness
perNAconsci &lt;- rowMeans(is.na(subset(big5_complete, select = C1:C5))) 
big5_complete[perNAconsci &gt; .5, ] </code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender    education age
## 676  63030  1 NA NA NA  5  6 NA NA NA  2 NA  2 NA  6 NA NA  3  4 NA NA NA  2 NA  4 NA Females some college  19
## 1122 63991  3 NA NA NA  3  3 NA NA NA  3 NA  3 NA  3 NA NA  3  3 NA NA NA  3 NA  3 NA Females some college  17
## 1648 65168  3  3 NA NA  5  1 NA NA NA  1 NA  1 NA  5  2 NA  5  5 NA NA NA  1 NA  1 NA Females         &lt;NA&gt;  13
## 2307 66546  6 NA NA NA  4  6 NA NA NA  4 NA  4 NA  6 NA NA  4  6 NA NA NA  4 NA  6 NA    Male         &lt;NA&gt;  17
##      completed
## 676          1
## 1122         1
## 1648         1
## 2307         1</code></pre>
<pre class="r"><code># Extraversion
perNAextra &lt;- rowMeans(is.na(subset(big5_complete, select = E1:E5))) 
big5_complete[perNAextra &gt; .5, ] </code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender       education age
## 226  62102  1  6  6  6  4  1  5  6 NA NA NA NA NA NA NA  2  5  5  4  4  5  5  5  6  1 Females graduate degree  26
## 244  62142  1  6  4  6  6  5  4  5  1  2 NA NA NA NA NA  1  2  2  1  1  4  2  5  5  3    Male    some college  40
## 676  63030  1 NA NA NA  5  6 NA NA NA  2 NA  2 NA  6 NA NA  3  4 NA NA NA  2 NA  4 NA Females    some college  19
## 1122 63991  3 NA NA NA  3  3 NA NA NA  3 NA  3 NA  3 NA NA  3  3 NA NA NA  3 NA  3 NA Females    some college  17
## 2307 66546  6 NA NA NA  4  6 NA NA NA  4 NA  4 NA  6 NA NA  4  6 NA NA NA  4 NA  6 NA    Male            &lt;NA&gt;  17
##      completed
## 226          1
## 244          1
## 676          1
## 1122         1
## 2307         1</code></pre>
<pre class="r"><code># Neuroticism
perNAneuro &lt;- rowMeans(is.na(subset(big5_complete, select = N1:N5))) 
big5_complete[perNAneuro &gt; .5, ] </code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender    education age
## 676  63030  1 NA NA NA  5  6 NA NA NA  2 NA  2 NA  6 NA NA  3  4 NA NA NA  2 NA  4 NA Females some college  19
## 1122 63991  3 NA NA NA  3  3 NA NA NA  3 NA  3 NA  3 NA NA  3  3 NA NA NA  3 NA  3 NA Females some college  17
## 1648 65168  3  3 NA NA  5  1 NA NA NA  1 NA  1 NA  5  2 NA  5  5 NA NA NA  1 NA  1 NA Females         &lt;NA&gt;  13
## 2307 66546  6 NA NA NA  4  6 NA NA NA  4 NA  4 NA  6 NA NA  4  6 NA NA NA  4 NA  6 NA    Male         &lt;NA&gt;  17
##      completed
## 676          1
## 1122         1
## 1648         1
## 2307         1</code></pre>
<pre class="r"><code># Openness
perNAopen &lt;- rowMeans(is.na(subset(big5_complete, select = O1:O5))) 
big5_complete[perNAopen &gt; .5, ] </code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender    education age
## 676  63030  1 NA NA NA  5  6 NA NA NA  2 NA  2 NA  6 NA NA  3  4 NA NA NA  2 NA  4 NA Females some college  19
## 1122 63991  3 NA NA NA  3  3 NA NA NA  3 NA  3 NA  3 NA NA  3  3 NA NA NA  3 NA  3 NA Females some college  17
## 1648 65168  3  3 NA NA  5  1 NA NA NA  1 NA  1 NA  5  2 NA  5  5 NA NA NA  1 NA  1 NA Females         &lt;NA&gt;  13
## 2307 66546  6 NA NA NA  4  6 NA NA NA  4 NA  4 NA  6 NA NA  4  6 NA NA NA  4 NA  6 NA    Male         &lt;NA&gt;  17
##      completed
## 676          1
## 1122         1
## 1648         1
## 2307         1</code></pre>
<p>เรารวบรวมแถว (rows) ที่มีปัญหาข้อมูลไม่ครบโดยด้วย OR |</p>
<pre class="r"><code>tobedeleted &lt;- perNAagree &gt; .5 | perNAconsci &gt; .5 | perNAextra &gt; .5 | perNAneuro &gt; .5 | perNAopen &gt; .5
big5_complete[tobedeleted, ]</code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender       education age
## 226  62102  1  6  6  6  4  1  5  6 NA NA NA NA NA NA NA  2  5  5  4  4  5  5  5  6  1 Females graduate degree  26
## 244  62142  1  6  4  6  6  5  4  5  1  2 NA NA NA NA NA  1  2  2  1  1  4  2  5  5  3    Male    some college  40
## 676  63030  1 NA NA NA  5  6 NA NA NA  2 NA  2 NA  6 NA NA  3  4 NA NA NA  2 NA  4 NA Females    some college  19
## 1122 63991  3 NA NA NA  3  3 NA NA NA  3 NA  3 NA  3 NA NA  3  3 NA NA NA  3 NA  3 NA Females    some college  17
## 1648 65168  3  3 NA NA  5  1 NA NA NA  1 NA  1 NA  5  2 NA  5  5 NA NA NA  1 NA  1 NA Females            &lt;NA&gt;  13
## 2307 66546  6 NA NA NA  4  6 NA NA NA  4 NA  4 NA  6 NA NA  4  6 NA NA NA  4 NA  6 NA    Male            &lt;NA&gt;  17
##      completed
## 226          1
## 244          1
## 676          1
## 1122         1
## 1648         1
## 2307         1</code></pre>
<p>เราจะคัดข้อมูลด้านบนทิ้งไป แล้วสร้างเป็น dataframe ใหม่</p>
<pre class="r"><code>big5_var_complete &lt;- big5_complete[!tobedeleted, ]
# OR 
big5_var_complete2 &lt;- big5_complete[perNAagree &lt;= .5 &amp; perNAconsci &lt;= .5 &amp; perNAextra &lt;= .5 &amp; perNAneuro &lt;= .5 &amp; perNAopen &lt;= .5, ]
identical(big5_var_complete, big5_var_complete2) #same results</code></pre>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="ตรวจสอบการตอบแบบทงดง-straightlining" class="section level1">
<h1>5. ตรวจสอบการตอบแบบทิ้งดิ่ง (Straightlining)</h1>
<p>กรณีที่ผู้ตอบให้คะแนนเดียวกันในทุกข้อ แสดงว่าผู้ตอบไม่ได้ใส่ใจในการตอบคำถาม ข้อมูลลักษณะนี้ควรถูกคัดทิ้ง</p>
<p>คำสั่ง <code>longstring</code> ในแพ็กเกจ careless ช่วยระบุความยาวของการทิ้งดิ่งได้</p>
<pre class="r"><code>long &lt;- longstring(big5_var_complete) # calculate the max length of identical response 
boxplot(long) # cases with 20 consecutive identical responses are suspicious</code></pre>
<p><img src="SURVEY_Lab08_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>big5_var_complete[long &gt; 10, ] # use 10 string as a cutoff</code></pre>
<pre><code>##          X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender    education age
## 562  62783  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5    Male some college  25
## 1430 64642  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1    Male some college  23
## 1555 64953  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5    Male some college  20
## 1563 64968  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3 Females  finished HS  19
## 2043 65974  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1    Male some college  19
##      completed
## 562          1
## 1430         1
## 1555         1
## 1563         1
## 2043         1</code></pre>
<pre class="r"><code>big5_clean &lt;- big5_var_complete[long &lt;= 10, ] # select response with less than 10 longstring and save to a new variable</code></pre>
</div>
<div id="การทดแทนคาขอมลสญหาย-missing-value-imputation" class="section level1">
<h1>6. การทดแทนค่าข้อมูลสูญหาย (Missing Value Imputation)</h1>
<p>การแทนค่าข้อมูลสูญหายด้วยค่าเฉลี่ย หรือค่ามัธยฐานของตัวแปรนั้น ๆ ทำได้โดยคำสั่ง <code>impute</code> ในแพ็กเกจ Hmisc</p>
<p>โดยค่าตั้งต้น <code>impute</code> จะแทนค่าด้วย median แต่ถ้าต้องการให้ใช้ค่า mean ทำได้โดยเพิ่ม option <code>fun = mean</code></p>
<pre class="r"><code># Agreeableness
big5_clean$A1.im &lt;- impute(big5_clean$A1, fun = mean)
big5_clean$A2.im &lt;- impute(big5_clean$A2, fun = mean)
big5_clean$A3.im &lt;- impute(big5_clean$A3, fun = mean)
big5_clean$A4.im &lt;- impute(big5_clean$A4, fun = mean)
big5_clean$A5.im &lt;- impute(big5_clean$A5, fun = mean)
# Repeat for all scales (tedious &amp; prone to errors)

### OR ###

# You can also use for loop (preferred)
big5_impute &lt;- big5_clean
begin # begin is the column number of A1, remember from above?</code></pre>
<pre><code>## [1] 2</code></pre>
<pre class="r"><code>end # end is the column number of O5</code></pre>
<pre><code>## [1] 26</code></pre>
<pre class="r"><code>for (i in begin:end) {
  big5_impute[,i] &lt;- impute(big5_clean[,i], fun = mean)
}
all(complete.cases(big5_impute[, begin:end])) # complete cases for everyone</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>psych::describe(big5_impute[, begin:end]) #notice that all n are equal.</code></pre>
<pre><code>##    vars    n mean   sd median trimmed  mad min max range  skew kurtosis   se
## A1    1 2787 2.41 1.40      2    2.23 1.48   1   6     5  0.83    -0.29 0.03
## A2    2 2787 4.80 1.16      5    4.98 1.48   1   6     5 -1.12     1.08 0.02
## A3    3 2787 4.61 1.29      5    4.79 1.48   1   6     5 -1.00     0.47 0.02
## A4    4 2787 4.70 1.47      5    4.93 1.48   1   6     5 -1.03     0.05 0.03
## A5    5 2787 4.56 1.25      5    4.71 1.48   1   6     5 -0.85     0.17 0.02
## C1    6 2787 4.51 1.23      5    4.64 1.48   1   6     5 -0.85     0.32 0.02
## C2    7 2787 4.37 1.31      5    4.50 1.48   1   6     5 -0.74    -0.12 0.02
## C3    8 2787 4.30 1.28      5    4.42 1.48   1   6     5 -0.69    -0.12 0.02
## C4    9 2787 2.55 1.37      2    2.41 1.48   1   6     5  0.60    -0.60 0.03
## C5   10 2787 3.30 1.62      3    3.25 1.48   1   6     5  0.07    -1.21 0.03
## E1   11 2787 2.97 1.63      3    2.86 1.48   1   6     5  0.38    -1.08 0.03
## E2   12 2787 3.14 1.60      3    3.07 1.48   1   6     5  0.22    -1.14 0.03
## E3   13 2787 4.00 1.35      4    4.07 1.48   1   6     5 -0.47    -0.45 0.03
## E4   14 2787 4.42 1.45      5    4.59 1.48   1   6     5 -0.82    -0.30 0.03
## E5   15 2787 4.42 1.33      5    4.57 1.48   1   6     5 -0.78    -0.07 0.03
## N1   16 2787 2.93 1.57      3    2.83 1.48   1   6     5  0.37    -1.00 0.03
## N2   17 2787 3.51 1.52      4    3.51 1.48   1   6     5 -0.08    -1.03 0.03
## N3   18 2787 3.21 1.60      3    3.15 1.48   1   6     5  0.16    -1.17 0.03
## N4   19 2787 3.19 1.56      3    3.12 1.48   1   6     5  0.20    -1.07 0.03
## N5   20 2787 2.97 1.61      3    2.85 1.48   1   6     5  0.38    -1.04 0.03
## O1   21 2787 4.82 1.12      5    4.96 1.48   1   6     5 -0.89     0.41 0.02
## O2   22 2787 2.71 1.56      2    2.56 1.48   1   6     5  0.59    -0.81 0.03
## O3   23 2787 4.44 1.21      5    4.56 1.48   1   6     5 -0.77     0.32 0.02
## O4   24 2787 4.90 1.21      5    5.10 1.48   1   6     5 -1.22     1.10 0.02
## O5   25 2787 2.49 1.32      2    2.34 1.48   1   6     5  0.74    -0.22 0.03</code></pre>
</div>
<div id="คำนวณคะแนนมาตรยอย" class="section level1">
<h1>7. คำนวณคะแนนมาตรย่อย</h1>
<p>มาตรวัดโดยทั่วไปมักจะมีการกลับคะแนน จึงต้องทำการกลับคะแนนก่อนค่อยหาค่าเฉลี่ยของด้านย่อยแต่ละด้าน</p>
<p>key ของมาตร Big Five นี้เป็นดังนี้</p>
<dl>
<dt>$agree</dt>
<dd>“-A1” “A2” “A3” “A4” “A5”
</dd>
<dt>$conscientious</dt>
<dd>“C1” “C2” “C3” “-C4” “-C5”
</dd>
<dt>$extraversion</dt>
<dd>“-E1” “-E2” “E3” “E4” “E5”
</dd>
<dt>$neuroticism</dt>
<dd>“N1” “N2” “N3” “N4” “N5”
</dd>
<dt>$openness</dt>
<dd>“O1” “-O2” “O3” “O4” “-O5”
</dd>
</dl>
<p>ในที่นี้จะแสดงวิธีกลับและรวมคะแนนของมาตร agreeableness และ conscientiousness</p>
<pre class="r"><code># agreeableness
big5_impute$A1.re &lt;- 7 - big5_impute$A1 # Reverse = (max_scale +1) - data
head(big5_impute[c(&quot;A1&quot;, &quot;A1.re&quot;)]) #see if reverse scoring is correct</code></pre>
<pre><code>##   A1 A1.re
## 1  2     5
## 2  2     5
## 3  5     2
## 4  4     3
## 5  2     5
## 6  6     1</code></pre>
<pre class="r"><code>big5_impute$agree_mean &lt;- rowMeans(big5_impute[c(&quot;A1.re&quot;, &quot;A2&quot;, &quot;A3&quot;, &quot;A4&quot;, &quot;A5&quot;)])
head(big5_impute$agree_mean)</code></pre>
<pre><code>## [1] 4.0 4.2 3.8 4.6 4.0 4.6</code></pre>
<pre class="r"><code>#conscientiousness
big5_impute$C4.re &lt;- 7 - big5_impute$C4 
big5_impute$C5.re &lt;- 7 - big5_impute$C5 
big5_impute$conscientious_mean &lt;- rowMeans(big5_impute[c(&quot;C1&quot;, &quot;C2&quot;, &quot;C3&quot;, &quot;C4.re&quot;, &quot;C5.re&quot;)])

# Subscale mean for each person
head(big5_impute[c(&quot;agree_mean&quot;, &quot;conscientious_mean&quot;)])</code></pre>
<pre><code>##   agree_mean conscientious_mean
## 1        4.0                2.8
## 2        4.2                4.0
## 3        3.8                4.0
## 4        4.6                3.0
## 5        4.0                4.4
## 6        4.6                5.6</code></pre>
<pre class="r"><code># Group means for each scale
psych::describe(big5_impute[c(&quot;agree_mean&quot;, &quot;conscientious_mean&quot;)])</code></pre>
<pre><code>##                    vars    n mean   sd median trimmed  mad min max range  skew kurtosis   se
## agree_mean            1 2787 4.65 0.89    4.8    4.72 0.89   1   6     5 -0.77     0.42 0.02
## conscientious_mean    2 2787 4.27 0.95    4.4    4.31 0.89   1   6     5 -0.41    -0.17 0.02</code></pre>
<pre class="r"><code># repeat for other subscales</code></pre>
</div>
<div id="ทางลด-5-7-psychscoreitems" class="section level1">
<h1>8. ทางลัด 5-7: <code>psych::scoreItems</code></h1>
<p>คำสั่ง <code>scoreItems</code> ในแพ็คเกจ psych ช่วยให้เราสามารถคำนวณคะแนน กลับคะแนน และแทนค่าสูญหายได้ในครั้งเดียว</p>
<p>input ของคำสั่ง มี</p>
<p><code>keys</code> list กำหนดน้ำหนัก -1, 0, 1 สำหรับข้อที่ต้องการกลับคะแนน ไม่คิดคะแนน คิดตามปกติ (ตามลำดับ) เราจะสร้าง list โดยตั้งชื่อมาตร เช่น <code>agree</code> = ชื่อตัวแปรที่จะใช้คำนวณ โดยตัวที่ต้องการกลับคะแนนให้ใส่ลบไว้ด้านหน้า ทำเช่นนี้ไปจนครบทุกมาตร</p>
<p><code>items</code> data.frame ที่มีคะแนนดิบของมาตร</p>
<p><code>min</code> ค่าต่ำสุดที่เป็นไปได้ของมาตร (ใช้สำหรับกลับคะแนน)</p>
<p><code>max</code> ค่าสูงสุดที่เป็นไปได้ของมาตร (ใช้สำหรับกลับคะแนน)</p>
<p><code>totals</code> TRUE = total scores; FALSE (default) = average scores</p>
<p><code>missing</code> TRUE = impute data; FALSE = complete cases only</p>
<p><code>impute</code> imputation method: “median”, “mean”, “none”</p>
<p><code>delete</code> ตัดข้อที่ไม่มี variance ทิ้ง (ใช้ตรวจสอบการทิ้งดิ่งได้ในกรณีที่มาตรย่อยค่อนข้างยาว แต่ถ้ามาตรสั้น 2-3 ข้อก็มีความเป็นไปได้ว่าผู้ตอบอาจจะเลือกคำตอบเหมือนกันทุกข้อในมาตรย่อย กรณีมาตรย่อยสั้น ควรดูการทิ้งดิ่งจากภาพรวมด้วย <code>careless::longstring()</code> แทน)</p>
<p>Output จากคำสั่ง <code>scoreItems</code> เป็น list ที่มีหลายตัวแปรอยู่ในนั้น ค่าคะแนนที่แปลงแล้วจะอยู่ใน object ที่ชื่อว่า <code>$score</code></p>
<pre class="r"><code>keys.list &lt;- list(agree = c(&quot;-A1&quot;,&quot;A2&quot;,&quot;A3&quot;,&quot;A4&quot;,&quot;A5&quot;),
                  conscientious=c(&quot;C1&quot;,&quot;C2&quot;,&quot;C3&quot;,&quot;-C4&quot;,&quot;-C5&quot;),
                  extraversion=c(&quot;-E1&quot;,&quot;-E2&quot;,&quot;E3&quot;,&quot;E4&quot;,&quot;E5&quot;),
                  neuroticism=c(&quot;N1&quot;,&quot;N2&quot;,&quot;N3&quot;,&quot;N4&quot;,&quot;N5&quot;), 
                  openness = c(&quot;O1&quot;,&quot;-O2&quot;,&quot;O3&quot;,&quot;O4&quot;,&quot;-O5&quot;))
big5_scores &lt;- scoreItems(key = keys.list, items = big5_clean, min = 1, max = 6, missing = TRUE, impute = &quot;mean&quot;) #output is a list with many info. 
head(big5_scores$scores) # access calculated scores</code></pre>
<pre><code>##   agree conscientious extraversion neuroticism openness
## 1   4.0           2.8          3.8         2.8      3.0
## 2   4.2           4.0          5.0         3.8      4.0
## 3   3.8           4.0          4.2         3.6      4.8
## 4   4.6           3.0          3.6         2.8      3.2
## 5   4.0           4.4          4.8         3.2      3.6
## 6   4.6           5.6          5.6         3.0      5.0</code></pre>
<pre class="r"><code>big5_calculated &lt;- cbind(big5_impute, big5_scores$scores) # combine data.frame
head(big5_calculated)</code></pre>
<pre><code>##       X A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5  gender    education age
## 1 61617  2  4  3  4  4  2  3  3  4  4  3  3  3  4  4  3  4  2  2  3  3  6  3  4  3    Male         &lt;NA&gt;  16
## 2 61618  2  4  5  2  5  5  4  4  3  4  1  1  6  4  3  3  3  3  5  5  4  2  4  3  3 Females         &lt;NA&gt;  18
## 3 61620  5  4  5  4  4  4  5  4  2  5  2  4  4  4  5  4  5  4  2  3  4  2  5  5  2 Females         &lt;NA&gt;  17
## 4 61621  4  4  6  5  5  4  4  3  5  5  5  3  4  4  4  2  5  2  4  1  3  3  4  3  5 Females         &lt;NA&gt;  17
## 5 61622  2  3  3  4  5  4  4  5  3  2  2  2  5  4  5  2  3  4  4  3  3  3  4  3  3    Male         &lt;NA&gt;  17
## 6 61623  6  6  5  6  5  6  6  6  1  3  2  1  6  5  6  3  5  2  2  3  4  3  5  6  1 Females some college  21
##   completed A1.im A2.im A3.im A4.im A5.im A1.re agree_mean C4.re C5.re conscientious_mean agree conscientious
## 1         1     2     4     3     4     4     5        4.0     3     3                2.8   4.0           2.8
## 2         1     2     4     5     2     5     5        4.2     4     3                4.0   4.2           4.0
## 3         1     5     4     5     4     4     2        3.8     5     2                4.0   3.8           4.0
## 4         1     4     4     6     5     5     3        4.6     2     2                3.0   4.6           3.0
## 5         1     2     3     3     4     5     5        4.0     4     5                4.4   4.0           4.4
## 6         1     6     6     5     6     5     1        4.6     6     4                5.6   4.6           5.6
##   extraversion neuroticism openness
## 1          3.8         2.8      3.0
## 2          5.0         3.8      4.0
## 3          4.2         3.6      4.8
## 4          3.6         2.8      3.2
## 5          4.8         3.2      3.6
## 6          5.6         3.0      5.0</code></pre>
<pre class="r"><code>psych::describe(big5_calculated[, c(37,40:42)]) # group means for agree and conscientious from each method</code></pre>
<pre><code>##                    vars    n mean   sd median trimmed  mad min max range  skew kurtosis   se
## agree_mean            1 2787 4.65 0.89    4.8    4.72 0.89   1   6     5 -0.77     0.42 0.02
## conscientious_mean    2 2787 4.27 0.95    4.4    4.31 0.89   1   6     5 -0.41    -0.17 0.02
## agree                 3 2787 4.65 0.89    4.8    4.72 0.89   1   6     5 -0.77     0.42 0.02
## conscientious         4 2787 4.27 0.95    4.4    4.31 0.89   1   6     5 -0.41    -0.17 0.02</code></pre>
<p>จะเห็นได้ว่าค่าที่ได้จาก <code>scoreItems</code> (สองบรรทัดล่าง) ตรงกับที่เราคำนวณเอง (สองบรรทัดบน มีคำว่า _mean ตามหลัง)</p>
</div>
<div id="หาคาสดโตงของมาตร" class="section level1">
<h1>9. หาค่าสุดโต่งของมาตร</h1>
<p>เราจะหาข้อมูลที่มีค่าสุดโต่งเกิน ±3 SD</p>
<p>เนื่องจากไม่มี function สำหรับวิธีนี้โดยตรง เราจะเขียน function <code>outlier_3sd</code> ขึ้นมาเองเพื่อใช้หาว่าแถวใดมีค่าสุดโต่ง</p>
<pre class="r"><code>outlier_3sd &lt;- function(var){
  m &lt;- mean(var)
  s &lt;- sd(var)
  loc &lt;- which(var &lt; m - (3*s) | var &gt; m + (3*s))
  value &lt;- var[loc]
  output &lt;- cbind(loc, value)
  colnames(output) &lt;- c(&quot;Location&quot;, &quot;Outlier_Values&quot;)
  return(output)
}

outlier_3sd(big5_calculated$agree) </code></pre>
<pre><code>##       Location Outlier_Values
##  [1,]      108            1.2
##  [2,]      118            1.8
##  [3,]      245            1.6
##  [4,]      447            1.6
##  [5,]      658            1.0
##  [6,]      661            1.6
##  [7,]     1054            1.4
##  [8,]     1379            1.2
##  [9,]     1397            1.8
## [10,]     1519            1.8
## [11,]     1743            1.8
## [12,]     1776            1.8
## [13,]     2487            1.8
## [14,]     2594            1.8
## [15,]     2605            1.8
## [16,]     2677            1.6
## [17,]     2742            1.6</code></pre>
<pre class="r"><code>outlier_3sd(big5_calculated$conscientious)</code></pre>
<pre><code>##       Location Outlier_Values
##  [1,]       20            1.2
##  [2,]       97            1.4
##  [3,]      795            1.0
##  [4,]     1002            1.0
##  [5,]     1208            1.0
##  [6,]     1212            1.2
##  [7,]     1296            1.0
##  [8,]     1500            1.0
##  [9,]     1519            1.4
## [10,]     2552            1.2
## [11,]     2616            1.4
## [12,]     2656            1.2</code></pre>
<pre class="r"><code>outlier_3sd(big5_calculated$extraversion) # no outliers</code></pre>
<pre><code>##      Location Outlier_Values</code></pre>
<pre class="r"><code>outlier_3sd(big5_calculated$neuroticism) # no outliers</code></pre>
<pre><code>##      Location Outlier_Values</code></pre>
<pre class="r"><code>outlier_3sd(big5_calculated$openness)</code></pre>
<pre><code>##      Location Outlier_Values
## [1,]      186            1.4
## [2,]      575            2.0
## [3,]      795            1.2
## [4,]      835            2.0
## [5,]     2353            2.0
## [6,]     2704            2.0</code></pre>
</div>
<div id="boxplot-และ-histogram" class="section level1">
<h1>10. Boxplot และ histogram</h1>
<pre class="r"><code>boxplot(big5_calculated[, 41:45])</code></pre>
<p><img src="SURVEY_Lab08_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<pre class="r"><code>hist(big5_calculated[, 41:45])</code></pre>
<p><img src="SURVEY_Lab08_files/figure-html/unnamed-chunk-20-2.png" width="672" /></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
